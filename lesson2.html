<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Lesson 2 — How to spot a gem before it 10x's</title>
<style>
  :root{
    --bg:#0f1115; --card:#171a21; --text:#e7eaf0; --muted:#9aa3b2;
    --brand:#B1FF8C; --line:#242936; --ink:#0b0e11; --danger:#ff5f6d;
  }
  *{box-sizing:border-box}
  html,body{height:100%}
  body{margin:0;background:var(--bg);color:var(--text);
       font:15px/1.5 system-ui,-apple-system,"Segoe UI",Roboto,Inter,Arial,sans-serif}
  a{color:inherit;text-decoration:none}

  /* Header */
  .bar{position:sticky;top:0;z-index:20;display:flex;align-items:center;justify-content:space-between;
       padding:12px 16px;background:linear-gradient(180deg,rgba(15,17,21,.95),rgba(15,17,21,.7) 60%,rgba(15,17,21,0));backdrop-filter:blur(8px)}
  .back{font-size:24px;line-height:1}
  .logo{height:44px;width:auto;object-fit:contain;display:block}
  @media (max-width:480px){.logo{height:36px}}

  /* Carousel */
  .viewport{overflow:hidden;position:relative}
  .track{display:flex;transition:transform .28s ease;will-change:transform}
  .slide{flex:0 0 100%;min-height:calc(100dvh - 72px);
         padding:14px 16px 28px;display:flex;flex-direction:column;align-items:center;justify-content:flex-start}
  /* УЗКИЙ КОНТЕНТ — чтобы стрелки не перекрывались */
  .wrap{width:100%;max-width:760px;margin:0 auto}

  .eyebrow{margin-top:8px;text-align:center;color:var(--muted);font-weight:600}
  .title{margin:6px auto 18px;text-align:center;max-width:720px;
         font-family:Georgia,serif;font-style:italic;font-size:26px;line-height:1.25;font-weight:600}

  /* Intro */
  .intro{display:grid;grid-template-columns:140px 1fr;gap:16px;align-items:start}
  .intro .art{background:var(--card);border:1px solid var(--line);border-radius:12px;overflow:hidden}
  .intro .art img{display:block;width:100%;height:auto}
  .intro p{margin:0 0 10px}
  @media (max-width:640px){.intro{grid-template-columns:1fr}.intro .art{order:-1;max-width:240px;justify-self:center}}

  /* Checklist */
  .h3{font-family:Georgia,serif;font-style:italic;font-size:22px;text-align:center;margin:8px 0}
  .mid-note{margin:6px auto 6px;text-align:center;color:var(--muted);max-width:640px}
  .rule{height:1px;background:var(--line);margin:10px auto;max-width:640px}
  .checks{display:grid;gap:14px;margin-top:8px}
  .item{display:grid;grid-template-columns:42px 1fr;gap:10px;align-items:flex-start;
        padding:12px;border:1px solid var(--line);border-radius:12px;background:#0d1219}
  .flag{width:42px;height:auto;display:block}
  .item h4{margin:0 0 6px;font-size:15px}
  .item p{margin:0;color:var(--muted)}

  /* CTA button */
  .cta{display:flex;justify-content:center;margin:16px 0 4px}
  .btn{display:inline-flex;align-items:center;justify-content:center;gap:8px;padding:16px 28px;border:0;border-radius:999px;
       background:var(--brand);color:#07110c;font-weight:700;box-shadow:0 6px 14px rgba(177,255,140,.25)}

  /* Nav / progress */
  .nav{position:absolute;left:0;right:0;bottom:8px;display:flex;align-items:center;justify-content:center;gap:10px;pointer-events:none}
  .dots{display:flex;gap:6px}
  .dot{width:6px;height:6px;border-radius:999px;background:#3a4457;opacity:.7}
  .dot.active{background:var(--brand);opacity:1}

  /* СТРЕЛКИ — крупнее и поверх */
  .arw{position:absolute;top:50%;transform:translateY(-50%);font-size:40px;line-height:1;background:transparent;border:0;color:#c5ccda;cursor:pointer;z-index:30}
  .arw.left{left:6px}
  .arw.right{right:6px}
  .arw:disabled{opacity:.35;cursor:default}

  /* Promo card (screen 3) */
  .finalCard{
    position:relative;background:var(--brand);color:var(--ink);
    border-radius:24px;padding:22px 18px 0;overflow:hidden;
  }
  .finalCard h4{margin:6px 0 8px;font-size:28px;line-height:1.15;font-weight:800;letter-spacing:.2px}
  .finalCard p{margin:0 0 14px;color:rgba(11,14,17,.85)}
  .storeBig{display:flex;align-items:center;justify-content:center;height:52px;border-radius:12px;background:#0b0e11;color:#fff;
            text-decoration:none;font-weight:800;font-size:16px;letter-spacing:.2px;box-shadow:0 8px 18px rgba(0,0,0,.25);margin:6px 0 12px}
  .artStack{position:relative;height:250px;margin-top:4px}
  .artStack .tile{position:absolute;left:16px;top:8px;width:min(78%,300px);filter:drop-shadow(0 10px 18px rgba(0,0,0,.18));z-index:2}
  .artStack .phones{position:absolute;left:50%;transform:translateX(-50%);bottom:0;width:min(92%,420px);filter:drop-shadow(0 12px 28px rgba(0,0,0,.25))}
  @media (max-width:420px){.artStack{height:230px}.artStack .tile{width:min(82%,280px);left:12px;top:6px}.artStack .phones{width:min(96%,390px)}}

  /* ---------- QUIZ ---------- */
  .quiz-head{display:flex;flex-direction:column;align-items:center;gap:8px;margin-top:4px}
  .quiz-title{font-family:Georgia,serif;font-style:italic;font-size:28px;text-align:center}
  .quiz-sub{color:var(--muted);text-align:center;max-width:680px}
  .quiz-sub a{color:#9dc8ff;text-decoration:underline}
  .q-counter{margin:10px 0 4px;color:var(--muted);font-weight:600;text-align:center}
  .q-text{margin:0 0 14px;text-align:center;font-size:16px;color:#d9dee8}

  .choices{display:grid;grid-template-columns:1fr 1fr;gap:12px;max-width:720px;margin:0 auto}
  .pick{display:flex;align-items:center;gap:10px;justify-content:flex-start;
        padding:14px 16px;border-radius:14px;background:#0d1219;border:2px solid var(--line);
        font-weight:600;cursor:pointer;transition:transform .06s ease,border-color .12s ease}
  .pick:hover{transform:translateY(-1px)}
  .pick .ico{font-size:18px}
  .pick.active{border-color:var(--brand)}
  .pick.wrong{border-color:var(--danger)}

  .reveal{margin:14px auto 8px;max-width:720px;background:#0d1219;border:1px solid var(--line);
          border-radius:14px;padding:14px;display:none}
  .reveal.show{display:flex;gap:12px;align-items:flex-start}
  .reveal .yn{font-family:Georgia,serif;font-style:italic;font-size:22px;min-width:56px}
  .reveal .why{color:var(--muted)}

  .next-wrap{display:flex;justify-content:center;margin:14px 0 6px}
  .next{display:none}
  .next.show{display:inline-flex}

  @media (max-width:720px){.choices{grid-template-columns:1fr}}
</style>
</head>
<body>
  <header class="bar">
    <a href="index.html" class="back" aria-label="Back">←</a>
    <img src="assets/logo-changelly.png" alt="Changelly" class="logo">
  </header>

  <div class="viewport" id="vp">
    <button class="arw left" id="prev" aria-label="Previous">‹</button>
    <button class="arw right" id="next" aria-label="Next">›</button>

    <div class="track" id="track">

      <!-- SLIDE 1: Intro -->
      <section class="slide">
        <div class="wrap">
          <div class="eyebrow">Lesson 2</div>
          <h1 class="title">How to spot a gem before it 10x's</h1>

          <div class="intro">
            <div class="art">
              <img src="assets/l2-hero-graph.png" alt="chart and coins">
            </div>
            <div>
              <p>Everyone wants to find The One: that tiny crypto project that quietly turns $100 into $1,000. But most people go about it the wrong way. They chase influencer hype, go for coins they don’t understand, and pray for moonshots. However, that’s not searching for a gem; it’s gambling.</p>
              <p>This lesson will give you a simple, repeatable checklist to spot high-potential coins before they pump, using smart signals that real investors watch for</p>
            </div>
          </div>
        </div>
      </section>

      <!-- SLIDE 2: Checklist (1–5) -->
      <section class="slide">
        <div class="wrap">
          <h3 class="h3">5 green flags checklist</h3>
          <p class="mid-note">Use this to quickly judge if a crypto project might actually be worth your attention. Start asking these 5 questions before buying any new crypto and you’ll already be way ahead of most people</p>
          <div class="rule"></div>
          <div class="checks">
            <div class="item"><img class="flag" src="assets/l2-flag-1.png" alt="1"><div><h4>Does it solve a real problem?</h4><p>If it’s another coin with no clear purpose, skip it. Good projects help people do something better or cheaper, like sending money, gaming, managing data, etc.</p></div></div>
            <div class="item"><img class="flag" src="assets/l2-flag-2.png" alt="2"><div><h4>Are real people actually using it?</h4><p>Check their Discord or X (Twitter). If it’s dead silent or full of bots — red flag. If people are chatting, building, helping — green flag</p></div></div>
            <div class="item"><img class="flag" src="assets/l2-flag-3.png" alt="3"><div><h4>Can you find out who built it?</h4><p>Known founders or devs are more trustworthy than a totally anonymous team</p></div></div>
            <div class="item"><img class="flag" src="assets/l2-flag-4.png" alt="4"><div><h4>Is it still early?</h4><p>Check the market cap. A coin that’s already huge (like $20B+) won’t 10x easily. A smaller cap means more upside, but more risk, too</p></div></div>
            <div class="item"><img class="flag" src="assets/l2-flag-5.png" alt="5"><div><h4>How does the token actually work?</h4><p>Look for limited supply, actual reasons to use the token, and if it was launched fair (meaning it’s not fully owned by insiders)</p></div></div>
          </div>
        </div>
      </section>

      <!-- SLIDE 3: Promo card + CTA to quiz -->
      <section class="slide">
        <div class="wrap">
          <section class="finalCard">
            <h4>Found a Gem? Stay on It!</h4>
            <p>Get the Changelly app to set custom alerts and get instant notifications on price moves and news</p>
            <a href="#" class="storeBig" aria-label="Download Changelly">Download Changelly</a>
            <div class="artStack" aria-hidden="true">
              <img class="tile" src="assets/l2-eth-tile.png" alt="">
              <img class="phones" src="assets/l2-phones.png" alt="">
            </div>
          </section>

          <div class="cta">
            <a href="#" class="btn" data-goto="3">Got it! Let’s keep going ⌄</a>
          </div>
        </div>
      </section>

      <!-- -------- QUIZ (5 слайдов) -------- -->

      <!-- Q1 -->
      <section class="slide quiz" data-correct="red">
        <div class="wrap">
          <div class="quiz-head">
            <h2 class="quiz-title">Red flag or green flag?</h2>
            <p class="quiz-sub">Check your scam radar with our latest quiz. Read the coin pitch and ask yourself: Would you be involved in it?<br>
              <span>Pick: <a>Green flag</a> or <a>red flag</a>. Then reveal the answer and learn why</span></p>
          </div>
          <div class="q-counter">Question 1/5</div>
          <p class="q-text">Guaranteed 1,000x next week. No docs, no devs, but lots of hype</p>

          <div class="choices">
            <button class="pick" data-choice="green"><span class="ico">🟩</span> Green Flag</button>
            <button class="pick" data-choice="red"><span class="ico">🚩</span> Red Flag</button>
          </div>

          <div class="reveal">
            <div class="yn">—</div>
            <div class="why">
              <span class="why-red">This is classic scam bait. No transparency, no documentation, and impossible promises.</span>
              <span class="why-green">If there’s only hype and no fundamentals, it’s not a green flag.</span>
            </div>
          </div>

          <div class="next-wrap"><button class="btn next">Next question</button></div>
        </div>
      </section>

      <!-- Q2 -->
      <section class="slide quiz" data-correct="green">
        <div class="wrap">
          <div class="q-counter">Question 2/5</div>
          <p class="q-text">Open-source repo with frequent commits and third-party audits published</p>
          <div class="choices">
            <button class="pick" data-choice="green"><span class="ico">🟩</span> Green Flag</button>
            <button class="pick" data-choice="red"><span class="ico">🚩</span> Red Flag</button>
          </div>
          <div class="reveal"><div class="yn">—</div><div class="why">
            <span class="why-green">Transparency + active development + audits = strong signal the team ships and cares about security.</span>
            <span class="why-red">Without these signals you’d be guessing; with them, the risk is lower.</span>
          </div></div>
          <div class="next-wrap"><button class="btn next">Next question</button></div>
        </div>
      </section>

      <!-- Q3 -->
      <section class="slide quiz" data-correct="red">
        <div class="wrap">
          <div class="q-counter">Question 3/5</div>
          <p class="q-text">Anonymous team, and 80% of supply unlocks to insiders next month</p>
          <div class="choices">
            <button class="pick" data-choice="green"><span class="ico">🟩</span> Green Flag</button>
            <button class="pick" data-choice="red"><span class="ico">🚩</span> Red Flag</button>
          </div>
          <div class="reveal"><div class="yn">—</div><div class="why">
            <span class="why-red">Huge insider unlock + no accountability = dump risk. Tokenomics matter.</span>
            <span class="why-green">Green flags need fair distribution and aligned incentives — not this.</span>
          </div></div>
          <div class="next-wrap"><button class="btn next">Next question</button></div>
        </div>
      </section>

      <!-- Q4 -->
      <section class="slide quiz" data-correct="green">
        <div class="wrap">
          <div class="q-counter">Question 4/5</div>
          <p class="q-text">Real utility: token pays app fees; users grow weekly; market cap is still small</p>
          <div class="choices">
            <button class="pick" data-choice="green"><span class="ico">🟩</span> Green Flag</button>
            <button class="pick" data-choice="red"><span class="ico">🚩</span> Red Flag</button>
          </div>
          <div class="reveal"><div class="yn">—</div><div class="why">
            <span class="why-green">Utility + traction can be a legit edge. Smaller cap means upside — with risk, of course.</span>
            <span class="why-red">If there were no usage, it’d be a red flag. Here the usage is the point.</span>
          </div></div>
          <div class="next-wrap"><button class="btn next">Next question</button></div>
        </div>
      </section>

      <!-- Q5 -->
      <section class="slide quiz" data-correct="red">
        <div class="wrap">
          <div class="q-counter">Question 5/5</div>
          <p class="q-text">“Risk-free staking” with fixed 20% daily returns. Invite-only via a Telegram bot, send funds to a wallet</p>
          <div class="choices">
            <button class="pick" data-choice="green"><span class="ico">🟩</span> Green Flag</button>
            <button class="pick" data-choice="red"><span class="ico">🚩</span> Red Flag</button>
          </div>
          <div class="reveal"><div class="yn">—</div><div class="why">
            <span class="why-red">Guaranteed high returns are a hallmark of ponzis/phishing. Never send funds to random wallets.</span>
            <span class="why-green">A legit yield is variable, transparent and auditable — not a magic 20% daily.</span>
          </div></div>
          <div class="next-wrap"><a class="btn next" id="levelUp" href="lesson3.html">Level up!</a></div>
        </div>
      </section>

    </div>

    <div class="nav"><div class="dots" id="dots"></div></div>
  </div>

<script>
  (function(){
    const track = document.getElementById('track');
    const slides = Array.from(track.children);
    const dots = document.getElementById('dots');
    const prev = document.getElementById('prev');
    const next = document.getElementById('next');
    let i = 0;

    // индексы квиз-слайдов
    const quizSlides = slides
      .map((s,idx)=>({el:s, idx, isQuiz:s.classList.contains('quiz')}))
      .filter(o=>o.isQuiz);
    const quizIdxs = quizSlides.map(o=>o.idx);
    const firstQuiz = quizIdxs[0], lastQuiz = quizIdxs[quizIdxs.length-1];
    const answered = new Array(quizIdxs.length).fill(false);

    // точки
    slides.forEach((_, idx) => {
      const d = document.createElement('span');
      d.className = 'dot' + (idx===0 ? ' active' : '');
      dots.appendChild(d);
    });
    const dotEls = Array.from(dots.children);

    function firstUnansweredSlideIdx(){
      const pos = answered.indexOf(false);
      return pos === -1 ? null : quizIdxs[pos];
    }

    function inQuiz(idx){ return idx >= firstQuiz && idx <= lastQuiz; }

    function canGoForward(fromIdx){
      // свободная навигация до квиза
      if (!inQuiz(fromIdx)) return true;
      // в квизе: если текущий вопрос не отвечен — нельзя
      const qPos = quizIdxs.indexOf(fromIdx);
      if (qPos !== -1 && !answered[qPos]) return false;
      return true;
    }

    function clampTarget(target){
      // если ещё есть неотвеченные — нельзя перелистывать дальше первого неотвеченного
      const fua = firstUnansweredSlideIdx();
      if (fua !== null && target > fua) return fua;
      return target;
    }

    function update(){
      track.style.transform = `translateX(${-i*100}%)`;
      dotEls.forEach((d,idx)=>d.classList.toggle('active', idx===i));

      // контролируем доступность кнопки "вперёд"
      let nextEnabled = i < slides.length-1;
      if (nextEnabled && inQuiz(i) && !canGoForward(i)) nextEnabled = false;
      next.disabled = !nextEnabled;
      prev.disabled = i===0;

      try { window.Telegram?.WebApp?.HapticFeedback?.impactOccurred('light'); } catch(e){}
    }

    function go(n){
      n = Math.max(0, Math.min(slides.length-1, n));
      // нельзя входить в середину квиза — только к первому неотвеченному
      if (n > firstQuiz) n = clampTarget(n);
      // движемся вперёд? проверяем блокировку
      if (n > i && !canGoForward(i)) return;
      i = n; update();
    }

    // «Got it!» прыжок к началу квиза
    document.querySelectorAll('[data-goto]').forEach(a=>{
      a.addEventListener('click', e=>{
        e.preventDefault();
        go(parseInt(a.dataset.goto,10)||firstQuiz||0);
      });
    });

    prev.addEventListener('click', ()=>go(i-1));
    next.addEventListener('click', ()=>go(i+1));

    // клавиатура
    window.addEventListener('keydown', e=>{
      if (e.key==='ArrowRight') go(i+1);
      if (e.key==='ArrowLeft') go(i-1);
    });

    // swipe
    let sx=0, dx=0, dragging=false;
    const vp = document.getElementById('vp');
    vp.addEventListener('touchstart', e=>{ sx = e.touches[0].clientX; dragging=true; dx=0; }, {passive:true});
    vp.addEventListener('touchmove', e=>{ if(!dragging) return; dx = e.touches[0].clientX - sx; }, {passive:true});
    vp.addEventListener('touchend', ()=>{
      if(!dragging) return; dragging=false;
      const thr = Math.min(80, window.innerWidth*0.12);
      if (dx < -thr) go(i+1);
      else if (dx > thr) go(i-1);
    });

    // ---- ЛОГИКА КВИЗА ----
    quizSlides.forEach((qObj, localIdx)=>{
      const slide = qObj.el;
      const picks = slide.querySelectorAll('.pick');
      const reveal = slide.querySelector('.reveal');
      const yn = reveal.querySelector('.yn');
      const whyRed = reveal.querySelector('.why-red');
      const whyGreen = reveal.querySelector('.why-green');
      const nextBtn = slide.querySelector('.next');
      const correct = slide.dataset.correct; // "green" | "red"

      function show(choice){
        // отмечаем кнопки
        picks.forEach(p=>{
          p.disabled = true;
          p.classList.toggle('active', p.dataset.choice===choice);
          if(p.dataset.choice !== correct) p.classList.add('wrong');
        });
        const isCorrect = choice===correct;
        yn.textContent = isCorrect ? 'Yes!' : 'No.';
        whyRed && (whyRed.style.display = correct==='red' ? 'inline' : 'none');
        whyGreen && (whyGreen.style.display = correct==='green' ? 'inline' : 'none');
        reveal.classList.add('show');
        nextBtn.classList.add('show');

        // фиксируем, что вопрос отвечен
        answered[localIdx] = true;
        update(); // пересчитать доступность стрелки
      }

      picks.forEach(p=>p.addEventListener('click', ()=>show(p.dataset.choice)));

      // "Next question" переводит на следующий слайд (или Level up! ведёт на lesson3.html)
      if (localIdx < quizSlides.length-1) {
        nextBtn.addEventListener('click', ()=> go(qObj.idx + 1));
      }
    });

    update();
  })();
</script>
</body>
</html>
